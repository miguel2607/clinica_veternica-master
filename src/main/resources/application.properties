# ===================================================================
# CONFIGURACION PRINCIPAL - CLINICA VETERINARIA
# ===================================================================
spring.application.name=clinica_veternica

# ===================================================================
# PERFIL ACTIVO
# ===================================================================
# Cambiar a 'prod' en produccion
spring.profiles.active=dev

# ===================================================================
# CONFIGURACION DE BASE DE DATOS - PostgreSQL
# ===================================================================
# Desarrollo local con PostgreSQL
# Asegúrate de tener PostgreSQL instalado y la base de datos creada:
# createdb clinica_veterinaria_dev
spring.datasource.url=jdbc:postgresql://localhost:5432/clinica_veterinaria_dev
spring.datasource.username=postgres
spring.datasource.password=postgres
spring.datasource.driver-class-name=org.postgresql.Driver

# ===================================================================
# CONFIGURACION JPA / HIBERNATE
# ===================================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
# Dialecto de PostgreSQL
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.open-in-view=false
# Deshabilitar búsqueda de JTA (usamos transacciones locales de Spring)
spring.jpa.properties.hibernate.transaction.coordinator_class=jdbc
# Configuración específica de PostgreSQL
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# ===================================================================
# CONFIGURACION DE LOGGING
# ===================================================================
logging.level.root=INFO
logging.level.com.veterinaria.clinica_veternica=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# ===================================================================
# CONFIGURACION DE SERVIDOR
# ===================================================================
server.port=8084
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.include-exception=false

# ===================================================================
# CONFIGURACION DE SWAGGER/OpenAPI
# ===================================================================
# Ruta estándar de OpenAPI 3.0
springdoc.api-docs.path=/v3/api-docs
# Ruta correcta para Swagger UI (SpringDoc OpenAPI 3.x)
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
# Configuración de ordenamiento
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
# Escanear solo controllers
springdoc.packages-to-scan=com.veterinaria.clinica_veternica.controller
# Configuración de tipos de contenido
springdoc.default-consumes-media-type=application/json
springdoc.default-produces-media-type=application/json
# Configuración adicional
springdoc.show-actuator=false
springdoc.model-and-view-allowed=false
springdoc.use-management-port=false
# Habilitar grupos (ahora usamos GroupedOpenApi)
springdoc.api-docs.groups.enabled=true
# Configuración de escritura
springdoc.write-docs-enabled=true
# Configuración para manejar referencias rotas
springdoc.remove-broken-reference-definitions=true
# Configuración de Swagger UI
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.swagger-ui.try-it-out-enabled=true
springdoc.swagger-ui.filter=true
# Configuración para mostrar ejemplos
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.show-common-extensions=true

# ===================================================================
# CONFIGURACION DE JWT
# ===================================================================
# La clave secreta se carga automáticamente desde el archivo .env
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION}
# Por defecto: 86400000 ms = 24 horas

# ===================================================================
# CONFIGURACION DE CACHE
# ===================================================================
spring.cache.type=simple
spring.cache.cache-names=servicios,mascotas,propietarios,horarios

# ===================================================================
# CONFIGURACION DE VALIDACION
# ===================================================================

# Habilitar recursos estáticos para Swagger UI
spring.web.resources.add-mappings=true

# ===================================================================
# CONFIGURACION DE JACKSON (JSON)
# ===================================================================
spring.jackson.time-zone=America/Bogota
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.default-property-inclusion=non_null

# ===================================================================
# CONFIGURACION DE MULTIPART (Archivos)
# ===================================================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ===================================================================
# CONFIGURACION DE EMAIL (Spring Mail)
# ===================================================================
# Configuración para Gmail (ejemplo)
# Para usar Gmail, necesitas una "Contraseña de aplicación" en lugar de tu contraseña normal
# spring.mail.host=smtp.gmail.com
# spring.mail.port=587
# spring.mail.username=tu-email@gmail.com
# spring.mail.password=tu-contraseña-de-aplicacion
# spring.mail.properties.mail.smtp.auth=true
# spring.mail.properties.mail.smtp.starttls.enable=true
# spring.mail.properties.mail.smtp.starttls.required=true

# Configuración para otros proveedores SMTP (Outlook, Yahoo, etc.)
# spring.mail.host=smtp-mail.outlook.com
# spring.mail.port=587
# spring.mail.username=tu-email@outlook.com
# spring.mail.password=tu-contraseña
# spring.mail.properties.mail.smtp.auth=true
# spring.mail.properties.mail.smtp.starttls.enable=true

# Nombre del remitente (opcional)
app.email.from-name=Clínica Veterinaria

# ===================================================================
# CONFIGURACION DE PAGINACION
# ===================================================================
spring.data.web.pageable.default-page-size=20
spring.data.web.pageable.max-page-size=100
